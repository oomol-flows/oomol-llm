title: Test Skills
nodes:
  - node_id: llm#1
    title: "LLM #1"
    inputs_from:
      - handle: messages
        value: null
      - handle: timeout
        value: 30
      - handle: retry_times
        value: 0
      - handle: retry_sleep
        value: 3.5
      - handle: stream
        value: true
      - handle: model
        value:
          model: oomol-chat
          temperature: 0
          top_p: 0.5
          max_tokens: 4096
      - handle: template
        value:
          - role: user
            content: "帮我把 {{source_path}} 这个地址转化为 pdf 文件"
        schema_overrides:
          - schema:
              type: array
      - handle: skills
        value:
          - package: manga-tools
            blockName: transform
        schema_overrides:
          - schema:
              type: array
      - handle: source_path
        value: /oomol-driver/downloads/manga/qq_manga.epub
    task: self::llm
    inputs_def:
      - handle: source_path
        json_schema:
          type: string
          ui:widget: file
    outputs_def:
      - handle: target_path
        description: 转换后的文件地址
        json_schema:
          type: string
          ui:widget: save
  - node_id: llm-chat#1
    title: "LLM chat #1"
    inputs_from:
      - handle: messages
        value: null
      - handle: timeout
        value: 30
      - handle: retry_times
        value: 0
      - handle: retry_sleep
        value: 3.5
      - handle: stream
        value: true
      - handle: model
        value:
          model: oomol-chat
          temperature: 0
          top_p: 0.5
          max_tokens: 4096
      - handle: template
        value:
          - role: user
            content: "帮我把 {{source_path}} 这个地址转化为 pdf 文件，转换后的文件存到同一个文件夹。"
        schema_overrides:
          - schema:
              type: array
      - handle: skills
        value:
          - package: manga-tools
            blockName: transform
        schema_overrides:
          - schema:
              type: array
      - handle: source_path
        value: /oomol-driver/downloads/manga/qq_manga.epub
    task: self::llm-chat
    inputs_def:
      - handle: source_path
        json_schema:
          type: string
          ui:widget: file
  - node_id: markdown_text_preview#1
    title: "Markdown preview #1"
    inputs_from:
      - handle: text
        from_node:
          - node_id: llm-chat#1
            output_handle: output
    task: oomol-preview::markdown_text_preview
